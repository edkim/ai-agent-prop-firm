{
  "name": "Earnings + Market Filter Strategy",
  "description": "Only buy stocks on earnings days when QQQ is positive",
  "ticker": "AAPL",
  "timeframe": "5min",
  "dependencies": ["QQQ"],
  "requireEarnings": true,
  "indicators": [
    {
      "type": "RSI",
      "id": "rsi14",
      "params": {
        "period": 14,
        "source": "close"
      }
    },
    {
      "type": "ATR",
      "id": "atr14",
      "params": {
        "period": 14
      }
    }
  ],
  "entryRules": {
    "conditions": [
      {
        "type": "expression",
        "expression": "has_earnings_today() AND has_earnings_bmo()",
        "description": "Stock has earnings this morning (before market open)"
      },
      {
        "type": "expression",
        "expression": "ticker_is_up('QQQ')",
        "description": "QQQ is positive on the day"
      },
      {
        "type": "expression",
        "expression": "(close - open) > 2 * atr14",
        "description": "Stock is up more than 2x ATR (strong move)"
      },
      {
        "type": "expression",
        "expression": "rsi14 < 80",
        "description": "Not overbought"
      }
    ],
    "logic": "AND"
  },
  "exitRules": {
    "conditions": [
      {
        "type": "expression",
        "expression": "(close - open) < 0.5 * atr14",
        "description": "Momentum fading"
      }
    ],
    "logic": "OR"
  },
  "positionSizing": {
    "method": "PERCENT_PORTFOLIO",
    "value": 50,
    "maxPositions": 1
  },
  "riskManagement": {
    "stopLoss": {
      "type": "PERCENT",
      "value": 3
    },
    "takeProfit": {
      "type": "PERCENT",
      "value": 8
    }
  }
}
